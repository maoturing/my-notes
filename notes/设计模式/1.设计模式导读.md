

> 设计模式三问

1. 为什么要有这种设计原则、思想或者模式？
2. 它能解决什么编程问题？有哪些应用场景？
3. 该如何权衡、恰当地在项目中应用？



> 为什么要学设计模式？

1. 应付面试
2. 写出设计合理，结构清晰，易扩展，易维护的代码
3. 更容易读懂源码，框架代码量大，类之间的关系复杂，为了保证代码易扩展，易维护，会使用很多的设计模式
4. 提高自己的代码设计能力，把控团队代码质量



> 从哪些维度可以评价代码质量？

1. 可维护性（maintainability）

   维护就是修改bug，修改老的功能，添加新的功能之类的工作。**易维护就是指在不破坏原有代码设计、不引入新的 bug 的情况下，能够快速地修改或者添加代码**。不易维护修改或者添加代码需要冒着极大的引入新 bug 的风险



2. 可读性（readability）任何傻瓜都会编写计算机能理解的代码，优秀的程序员能编写人能够理解的代码

   **可读性包括符合编码规范，命名达意，注释详尽，函数长短适当，模块划分清晰，高内聚低耦合**。无论是修改bug，还是修改添加功能代码，都需要先读懂代码，代码的可读性很大程度上影响代码的可维护性。

   

3. 可扩展性（extensibility）

   **可扩展就是在不修改或少修改原有代码的情况下，通过扩展的方式添加新的功能代码**，代码中预留一些功能的扩展点，可以把新功能代码，直接插到扩展点上，而不需要为添加一个新功能大量改动原先的代码。代码的可扩展也在很大程度上英雄代码的可维护性。

   设计原则中的“对扩展开放，对修改关闭”就是为了保证可扩展性



4. 灵活性（flexibility）

   添加新功能时，原有的代码已经预留了扩展点，我们无需修改原代码，就能添加新功能

   实现一个新功能时，原有的代码中，已经抽象出了很多底层可以复用的模块，可以直接使用

   使用某组接口时，这组接口可以应对各种使用场景，满足不同需求



5. 简洁性（simplicity）KISS原则 Keep It Simple, Stupid

   尽量保持代码简单，逻辑清晰，就意味着易读易维护。

   

6. 可复用性（reusability）

   尽量减少重复代码的编写，复用已有的代码。面向对象的继承、多条特性，目的之一就是为了提高代码的可复用性。解耦，高内聚，模块化都是为了提高代码的可复用性。

   设计原则中的”单一职责原则“也是为了保证可复用性。

   

7. 易测试性（testability）设计

   代码的可测试性是一个相对较少被提及，但又非常重要的代码质量评价标准。。代码的可测试性差，比较难写单元测试，那基本上就能说明代码设计得有问题。**代码的可测试性，是重构的关键点，持续重构可以保持代码的可维护性**。





> 有哪些方法可以提高代码质量？

1. 面向对象：抽象封装继承多态，接口抽象类，基于接口而非实现编程，多组合少继承，充血模型

2. 设计原则：SRP 单一职责原则，OCP 开闭原则，LSP 里氏替换原则，ISP 接口隔离原则，DIP 依赖倒置原则，DRP 原则，KISS 原则，YAGNI 原则，LOD 法则

3. 设计模式

   创建型：单例模式，工厂方法模式，抽象工厂模式，建造者模式，原型模式

   结构型：代理模式，桥接模式，装饰者模式，适配器模式，门面模式，组合模式，享元模式

   行为型：观察者模式，模板模式，策略模式，职责链模式，迭代器模式，状态模式，访问者模式，备忘录模式，命令模式，解释器模式，中介模式

4. 编程规范

   变量类方法命名，注释等规则，参考《阿里巴巴Java开发手册》《重构》《代码大全》《代码整洁之道》

5. 代码重构

   持续重构是保持代码质量不下降的有效手段。设计思想，设计原则，设计模式一个最重要的应用场景就是在重构的时候，虽然设计模式可以提高代码的可维护性，但过度使用，会增加代码的复杂度，影响代码的可读性。在开发初期，一定不要过度设计，应用复杂的设计模式。保证重构不出错靠的是单元测试和代码的可测试性。



> 上面五种方法的关系

- 面向对象是很多设计原则，设计模式等编码实现的基础；

- 设计原则是很多设计模式的指导思想，比如“开闭原则”对策略模式，模板模式；

- 应用设计模式主要目的是为了提高代码的可扩展性；

- 编程规范解决的是代码的可读性问题，更加注重代码细节和落地；
- 重构是保证代码质量不下降的有段，利用面向对象，设计原则，设计模式，编码规范来实现重构





简而言之，面向对象是武器，设计模式是招式，设计原则是心法。

![image-20220512171021731](https://cdn.jsdelivr.net/gh/maoturing/PictureBed/picGo/image-20220512171021731.png)